module til-desugar
imports TIL 
rules

  ForToWhile :
    For(x, e1, e2, st*) ->
      Block([
        Declaration(y), 
        Assign(x, e1), 
        Assign(y, e2), 
        While(Or(Lt(Var(x), Var(y)), Equ(Var(x), Var(y))), 
          <conc>(st*, [Assign(x, Add(Var(x), Int("1")))])
        )
      ])
    where new => y

  IfThenToIfElse :
    IfThen(e, st*) -> IfElse(e, st*, [])

  AndIsMul :
    And(e1, e2) -> Mul(e1, e2)

  OrIsAdd :
    Or(e1, e2) -> Add(e1, e2)
